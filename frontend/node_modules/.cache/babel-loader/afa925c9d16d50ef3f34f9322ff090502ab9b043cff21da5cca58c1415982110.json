{"ast":null,"code":"import React,{Component}from'react';import{CartContext}from\"../store/shopping-cart-context\";import{groupAttributesBySet}from'../utilities/attributeUtils';import AttributeSet from'./AttributeSet';import parse from'html-react-parser';import CartModal from'./CartModal.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class Product extends Component{constructor(props){super(props);this.handleOpenCartClick=()=>{this.modal.current.open();};this.handleNextImage=()=>{this.setState(prevState=>({currentImageIndex:(prevState.currentImageIndex+1)%this.props.product.images.length}));};this.handlePrevImage=()=>{this.setState(prevState=>({currentImageIndex:(prevState.currentImageIndex-1+this.props.product.images.length)%this.props.product.images.length}));};this.state={currentImageIndex:0};this.modal=/*#__PURE__*/React.createRef();}render(){const{product}=this.props;const{addItemToCart,handleCheckboxChange,allAttributesSelected,selectedAttributes}=this.context;const{currentImageIndex}=this.state;if(!product){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}const groupedAttributes=groupAttributesBySet(product.attributes)||{};const isAddToCartDisabled=!allAttributesSelected(groupedAttributes)||!product.inStock;return/*#__PURE__*/_jsxs(\"div\",{id:\"product\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gallery\",\"data-testid\":\"product-gallery\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"all-images\",children:product.images&&product.images.map((image,index)=>/*#__PURE__*/_jsx(\"img\",{src:image.image_url,alt:\"\".concat(product.name,\" \").concat(index+1),onClick:()=>this.setState({currentImageIndex:index})},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-image\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.images[currentImageIndex].image_url,alt:\"\".concat(product.name,\" main\")}),/*#__PURE__*/_jsx(\"button\",{className:\"prev-arrow\",onClick:this.handlePrevImage,children:\"\\u25C0\"}),/*#__PURE__*/_jsx(\"button\",{className:\"next-arrow\",onClick:this.handleNextImage,children:\"\\u25B6\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"other-details\",children:[/*#__PURE__*/_jsx(\"h3\",{children:product.name}),/*#__PURE__*/_jsx(\"p\",{\"data-testid\":\"product-description\",children:parse(product.description)}),Object.entries(groupedAttributes).map(_ref=>{let[setName,attributes]=_ref;return/*#__PURE__*/_jsx(AttributeSet,{setName:setName,attributes:attributes,selectedAttributes:selectedAttributes,handleCheckboxChange:handleCheckboxChange},setName);}),/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[\"Price: \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{children:[product.price.currency.symbol,product.price.amount.toFixed(2)]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"add-to-cart-button\",\"data-testid\":\"add-to-cart\",disabled:isAddToCartDisabled,onClick:()=>{addItemToCart(product,selectedAttributes);this.handleOpenCartClick();},children:product.inStock?'Add to cart':'Out of Stock'})]}),/*#__PURE__*/_jsx(CartModal,{ref:this.modal})]});}}Product.contextType=CartContext;export default Product;","map":{"version":3,"names":["React","Component","CartContext","groupAttributesBySet","AttributeSet","parse","CartModal","jsx","_jsx","jsxs","_jsxs","Product","constructor","props","handleOpenCartClick","modal","current","open","handleNextImage","setState","prevState","currentImageIndex","product","images","length","handlePrevImage","state","createRef","render","addItemToCart","handleCheckboxChange","allAttributesSelected","selectedAttributes","context","children","groupedAttributes","attributes","isAddToCartDisabled","inStock","id","className","map","image","index","src","image_url","alt","concat","name","onClick","description","Object","entries","_ref","setName","price","currency","symbol","amount","toFixed","disabled","ref","contextType"],"sources":["C:/xampp/htdocs/ecommerce/frontend/src/components/Product.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { CartContext } from \"../store/shopping-cart-context\";\r\nimport { groupAttributesBySet } from '../utilities/attributeUtils';\r\nimport AttributeSet from './AttributeSet';\r\nimport parse from 'html-react-parser';\r\nimport CartModal from './CartModal.js';\r\n\r\nclass Product extends Component {\r\n  static contextType = CartContext;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      currentImageIndex: 0\r\n    };\r\n    this.modal = React.createRef();\r\n  }\r\n\r\n  handleOpenCartClick = () => {\r\n    this.modal.current.open();\r\n  };\r\n\r\n  handleNextImage = () => {\r\n    this.setState((prevState) => ({\r\n      currentImageIndex: (prevState.currentImageIndex + 1) % this.props.product.images.length\r\n    }));\r\n  };\r\n\r\n  handlePrevImage = () => {\r\n    this.setState((prevState) => ({\r\n      currentImageIndex: (prevState.currentImageIndex - 1 + this.props.product.images.length) % this.props.product.images.length\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const { product } = this.props;\r\n    const { addItemToCart, handleCheckboxChange, allAttributesSelected, selectedAttributes } = this.context;\r\n    const { currentImageIndex } = this.state;\r\n\r\n    if (!product) {\r\n      return <div>Loading...</div>;\r\n    }\r\n\r\n    const groupedAttributes = groupAttributesBySet(product.attributes) || {};\r\n    const isAddToCartDisabled = !allAttributesSelected(groupedAttributes) || !product.inStock;\r\n\r\n    return (\r\n      <div id=\"product\">\r\n        <div className=\"gallery\" data-testid={`product-gallery`}>\r\n          <div className=\"all-images\">\r\n            {product.images && product.images.map((image, index) => (\r\n              <img key={index} src={image.image_url} alt={`${product.name} ${index + 1}`} onClick={() => this.setState({ currentImageIndex: index })} />\r\n            ))}\r\n          </div>\r\n          <div className=\"main-image\">\r\n            <img src={product.images[currentImageIndex].image_url} alt={`${product.name} main`} />\r\n            <button className=\"prev-arrow\" onClick={this.handlePrevImage}>&#9664;</button>\r\n            <button className=\"next-arrow\" onClick={this.handleNextImage}>&#9654;</button>\r\n          </div>\r\n        </div>\r\n        <div className=\"other-details\">\r\n          <h3>{product.name}</h3>\r\n          <p data-testid={`product-description`}>{parse(product.description)}</p>\r\n          {Object.entries(groupedAttributes).map(([setName, attributes]) => (\r\n            <AttributeSet\r\n              key={setName}\r\n              setName={setName}\r\n              attributes={attributes}\r\n              selectedAttributes={selectedAttributes}\r\n              handleCheckboxChange={handleCheckboxChange}\r\n            />\r\n          ))}\r\n          <p className=\"price\">Price: <br /><span>{product.price.currency.symbol}{product.price.amount.toFixed(2)}</span></p>\r\n          <button className=\"add-to-cart-button\" data-testid={`add-to-cart`} disabled={isAddToCartDisabled} onClick={() => {addItemToCart(product, selectedAttributes); this.handleOpenCartClick();}} >{product.inStock ? 'Add to cart' : 'Out of Stock'}</button>\r\n        </div>\r\n        <CartModal ref={this.modal} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Product;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}